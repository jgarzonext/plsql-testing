--------------------------------------------------------
--  DDL for Function F_PRESENTADOR
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE FUNCTION "AXIS"."F_PRESENTADOR" (PCDOMENT IN NUMBER, PCEMPRES IN OUT NUMBER, PNNUMNIF
			IN OUT VARCHAR2, PTSUFIJO IN OUT VARCHAR2)
RETURN NUMBER authid current_user IS
--  LLIBRERIA: ALLIBADM.
-- FUNCIÓ QUE ACCEDEIX A LA TAULA EMPRESAS I OBTÉ DADES DE LA EMPRESA.
ERROR		NUMBER := 0;
XCEMPRES	NUMBER;
XNNUMNIF	NUMBER;
BEGIN
IF PCEMPRES IS NULL THEN
ERROR := F_NIFEMPRESA(XCEMPRES, PNNUMNIF);
IF ERROR = 0 THEN
	PCEMPRES := XCEMPRES;
	RETURN 0;
ELSE
	RETURN ERROR;
END IF;
ELSE	-- PCEMPRES VE INFORMAT
ERROR := F_NIFEMPRESA(PCEMPRES, XNNUMNIF);
IF ERROR = 0 THEN
	PNNUMNIF := XNNUMNIF;
	PTSUFIJO := '000';
	RETURN 0;
ELSE
	RETURN ERROR;
END IF;
END IF;
END;
 
 

/

  GRANT EXECUTE ON "AXIS"."F_PRESENTADOR" TO "R_AXIS";
  GRANT EXECUTE ON "AXIS"."F_PRESENTADOR" TO "CONF_DWH";
  GRANT EXECUTE ON "AXIS"."F_PRESENTADOR" TO "PROGRAMADORESCSI";
